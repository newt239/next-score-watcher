# Cloud Games 実装計画

Cloud Games機能の未実装部分についてタスク分解と設計方針を記述します。

## 概要

Cloud Gamesは既存のIndexedDBベースのゲーム機能をSQLite（Turso）ベースに移行し、クラウド上でのデータ共有を可能にする機能です。基本的な構造は実装済みですが、以下の機能が未実装となっています。

移行にあたっては既存のIndexedDBベースの実装に影響しない形で、完全に独立させて実装してください。

## 未実装機能一覧

### 1. ゲーム作成機能（最高優先度）

**現状**: 完全に未実装  
**必要な実装**:

- ゲーム形式選択UI
- ゲーム名入力機能
- 新規ゲーム作成API連携
- 作成後の自動リダイレクト
- エラーハンドリング

### 2. プレイヤー設定機能（高優先度）

**現状**: プレースホルダーコンポーネントのみ  
**必要な実装**:

- プレイヤーの追加・削除・編集
- プレイヤーの並び順変更（ドラッグ&ドロップ）
- 初期スコア・正解数・誤答数の設定
- 既存プレイヤーからの選択機能

### 2. 形式設定機能（高優先度）

**現状**: プレースホルダーコンポーネントのみ  
**必要な実装**:

- 各ゲーム形式別の設定項目
- 動的な設定UIの生成
- バリデーション機能
- デフォルト値の設定

### 3. ボード表示機能（高優先度）

**現状**: 基本情報表示のみ  
**必要な実装**:

- リアルタイムスコア表示
- プレイヤー操作ボタン
- ゲームログ表示
- 勝利判定とモーダル表示
- 元に戻す/やり直し機能

### 4. その他設定機能（中優先度）

**現状**: プレースホルダーコンポーネントのみ  
**必要な実装**:

- ゲーム名の変更
- Discord Webhook設定
- ゲームのコピー機能
- ゲームの削除機能
- データエクスポート機能

### 5. 認証・権限管理（中優先度）

**現状**: 基本的な認証のみ  
**必要な実装**:

- ユーザー別データ分離
- 権限チェック機能
- セッション管理の改善

### 6. データ同期機能（低優先度）

**現状**: 未実装  
**必要な実装**:

- リアルタイム同期
- オフライン対応
- 競合解決機能

## 実装順序

1. **フェーズ0**: ゲーム作成機能（最優先）
2. **フェーズ1**: プレイヤー設定機能
3. **フェーズ2**: 形式設定機能
4. **フェーズ3**: ボード表示機能
5. **フェーズ4**: その他設定機能
6. **フェーズ5**: 認証・権限管理強化
7. **フェーズ6**: データ同期機能

## 技術的考慮事項

### データベース設計

- 既存のDrizzleスキーマを活用
- 必要に応じて新しいテーブルを追加
- マイグレーション戦略の検討

### APIエンドポイント

- RESTful設計の維持
- Hono frameworkの活用
- バリデーション強化

### UI/UX

- 既存のMantineコンポーネント活用
- CSS Modulesによるスタイリング
- レスポンシブ対応

### 型安全性

- TypeScript strict mode
- Zodによるバリデーション
- 適切な型定義の維持
